<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Sep 14, 2011 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title></title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20110914" />
    <meta http-equiv="Content-Language" content="en" />
                                                    
<link rel="stylesheet" type="text/css" href="/css/site%2ecss"/>
                      
        </head>
  <body class="composite">
    <div id="banner">
                                      <a href=".." id="bannerLeft">
                                                <img src="../images/softec.png" alt="SOFTEC sa" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                
                <div class="xleft">
        <span id="publishDate">Last Published: 14 Sep 2011</span>
                  &nbsp;| <span id="projectVersion">Version: 1.1-softec</span>
                          |                           <a href="../index.html" title="JavaScript Maven Tools">JavaScript Maven Tools</a>
        &gt;
                              <a href="./" title="Javascript Maven Plugin">Javascript Maven Plugin</a>
        &gt;
    
              </div>
            <div class="xright">                    <a href="http://softec.lu/" class="externalLink" title="SOFTEC sa">SOFTEC sa</a>
              
                
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                
                                <h5>Overview</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="../javascript-maven-plugin/development.html" title="JavaScript development">JavaScript development</a>
            </li>
                  <li class="none">
                          <a href="../javascript-maven-plugin/webapp-development.html" title="JavaScript in Webapps">JavaScript in Webapps</a>
            </li>
                  <li class="none">
                          <a href="../javascript-maven-plugin/titanium-development.html" title="Titanium development">Titanium development</a>
            </li>
                  <li class="none">
                          <a href="../javascript-maven-plugin/titanium-tutorial.html" title="Titanium tutorial">Titanium tutorial</a>
            </li>
          </ul>
                       <h5>Parent Project</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Maven tools for JavaScript developers">Maven tools for JavaScript developers</a>
            </li>
          </ul>
                                 <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                  <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                            <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Titanium Javascript development with Maven<a name="Titanium_Javascript_development_with_Maven"></a></h2><div class="section"><h3>Pre-Requisites<a name="Pre-Requisites"></a></h3><p>In order to use this Maven plugin, you need to have properly installed Titanium Studio and required dependencies (SDK, XCode, ...) has describe for your targeted platform on the <a class="externalLink" href="http://developer.appcelerator.com/get_started">Titanium Appcelerator&#x2122; site</a>.</p></div><div class="section"><h3>Project configuration<a name="Project_configuration"></a></h3><p>In order to work correctly the Titanium Appcelerator&#x2122; project must use a custom packaging type named <tt>titanium</tt>. When using this packaging the lifecycle is adapted for building a Titanium Appcelerator&#x2122; application.</p><div class="source"><pre>&lt;project&gt;
    ...
    &lt;packaging&gt;titanium&lt;/packaging&gt;
&lt;/project&gt;</pre></div></div><div class="section"><h3>Project structure<a name="Project_structure"></a></h3><p>A typical Titanium Appcelerator&#x2122; project structure looks like this:</p><div class="source"><pre>  |- src
    `- main
      |- javascript  (common javascript files)
      | |- android   (android specific javascript files)
      | `- iphone    (ios specific javascript files)
      |- resources   (common resources)
        |- Ressources  (Titanium ressources)
        | |- android   (android specific resources)
        | `- iphone    (ios specific resources)
        `- tiapp.xml (template for the tiapp.xml descriptor file)</pre></div></div><div class="section"><h3>Process-Resources phase<a name="Process-Resources_phase"></a></h3><p>Every Titanium Appcelerator&#x2122; project must have a file named &quot;tiapp.xml&quot;. In order to automate the process, you may use the maven-resources-plugin to filter a template tiapp.xml file.</p><p>A typical resource filtering will be</p><div class="source"><pre>&lt;project&gt;
  ...
    &lt;build&gt;
        &lt;resources&gt;
            &lt;resource&gt;
                &lt;directory&gt;src/main/resources&lt;/directory&gt;
                &lt;filtering&gt;true&lt;/filtering&gt;
                &lt;includes&gt;
                    &lt;include&gt;**/tiapp.xml&lt;/include&gt;
                &lt;/includes&gt;
            &lt;/resource&gt;
            &lt;resource&gt;
                &lt;directory&gt;src/main/resources&lt;/directory&gt;
                &lt;filtering&gt;false&lt;/filtering&gt;
                &lt;excludes&gt;
                    &lt;exclude&gt;**/tiapp.xml&lt;/exclude&gt;
                &lt;/excludes&gt;
            &lt;/resource&gt;
        &lt;/resources&gt;
    &lt;/build&gt;
  ...
&lt;/project&gt;</pre></div><p>This avoid processing of other binary resource required, like the logos and other image ressources.</p><p>And a typical tiapp.xml file could look like:</p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;ti:app xmlns:ti=&quot;http://ti.appcelerator.org&quot;&gt;
  &lt;id&gt;${titanium.bundleSeedId}.${project.groupId}.${project.artifactId}&lt;/id&gt;
  &lt;name&gt;${project.name}&lt;/name&gt;
  &lt;version&gt;${project.version}&lt;/version&gt;
  &lt;publisher&gt;${project.organization.name}&lt;/publisher&gt;
  &lt;url&gt;${project.url}&lt;/url&gt;
  &lt;description&gt;${project.description}&lt;/description&gt;
  &lt;copyright&gt;Copyright ${project.inceptionYear} - ${project.organization.name}&lt;/copyright&gt;
  &lt;icon&gt;${titanium.icon}&lt;/icon&gt;
  &lt;persistent-wifi&gt;${titanium.persistent-wifi}&lt;/persistent-wifi&gt;
  &lt;prerendered-icon&gt;${titanium.prerendered-icon}&lt;/prerendered-icon&gt;mvn
  &lt;statusbar-style&gt;${titanium.statusbar-style}&lt;/statusbar-style&gt;
  &lt;statusbar-hidden&gt;${titanium.statusbar-hidden}&lt;/statusbar-hidden&gt;
  &lt;fullscreen&gt;${titanium.fullscreen}&lt;/fullscreen&gt;
  &lt;navbar-hidden&gt;${titanium.navbar-hidden}&lt;/navbar-hidden&gt;
  &lt;analytics&gt;${titanium.analytics}&lt;/analytics&gt;
  &lt;guid&gt;${titanium.guid}&lt;/guid&gt;
  &lt;property name=&quot;ti.android.google.map.api.key.development&quot;&gt;${titanium.google.map.api.key.development}&lt;/property&gt;
  &lt;property name=&quot;ti.android.google.map.api.key.production&quot;&gt;${titanium.google.map.api.key.production}&lt;/property&gt;
  &lt;iphone&gt;
     ${titanium.iphone}
   &lt;/iphone&gt;
  &lt;android xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;
     ${titanium.android}
  &lt;/android&gt;
  &lt;modules&gt;
     ${titanium.modules}
  &lt;/modules&gt;
&lt;/ti:app&gt;</pre></div><p>With the following properties defined in your POM:</p><div class="source"><pre>  &lt;properties&gt;
    &lt;titanium.bundleSeedId&gt;XXXXXXXXXX&lt;/titanium.bundleSeedId&gt;
    &lt;titanium.icon&gt;appicon.png&lt;/titanium.icon&gt;
    &lt;titanium.persistent-wifi&gt;false&lt;/titanium.persistent-wifi&gt;
    &lt;titanium.prerendered-icon&gt;false&lt;/titanium.prerendered-icon&gt;
    &lt;titanium.statusbar-style&gt;default&lt;/titanium.statusbar-style&gt;
    &lt;titanium.statusbar-hidden&gt;false&lt;/titanium.statusbar-hidden&gt;
    &lt;titanium.fullscreen&gt;false&lt;/titanium.fullscreen&gt;
    &lt;titanium.navbar-hidden&gt;false&lt;/titanium.navbar-hidden&gt;
    &lt;titanium.analytics&gt;false&lt;/titanium.analytics&gt;
    &lt;titanium.guid&gt;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&lt;/titanium.guid&gt;
    &lt;titanium.google.map.api.key.development&gt;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&lt;/titanium.google.map.api.key.development&gt;
    &lt;titanium.google.map.api.key.production&gt;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&lt;/titanium.google.map.api.key.production&gt;
    &lt;titanium.iphone&gt;
      &lt;![CDATA[
        &lt;orientations device=&quot;iphone&quot;&gt;
          &lt;orientation&gt;Ti.UI.PORTRAIT&lt;/orientation&gt;
          &lt;orientation&gt;Ti.UI.UPSIDE_PORTRAIT&lt;/orientation&gt;
          &lt;orientation&gt;Ti.UI.LANDSCAPE_LEFT&lt;/orientation&gt;
          &lt;orientation&gt;Ti.UI.LANDSCAPE_RIGHT&lt;/orientation&gt;
        &lt;/orientations&gt;
      ]]&gt;
    &lt;/titanium.iphone&gt;
    &lt;titanium.android&gt;
      &lt;![CDATA[
      ]]&gt;
    &lt;/titanium.android&gt;
    &lt;titanium.modules&gt;
      &lt;![CDATA[
      ]]&gt;
    &lt;/titanium.modules&gt;
  &lt;/properties&gt;</pre></div></div><div class="section"><h3>Compile phase<a name="Compile_phase"></a></h3><p>During the compile phase (which execute the <tt>titanium-compile</tt> goal), the following operations are executed:</p><ul><li>The javascript dependencies are extracted to the <tt>depsDirectory</tt> folder;</li><li>The javascript files present in the <tt>sourceDirectory</tt> are copied to the <tt>outputDirectory</tt>;</li><li>Javascript files present in the plaform specific folder located under the <tt>sourceDirectory</tt> are copied to <tt>outputDirectory</tt>, overwriting any existing common file previously copied.</li><li>All those files are finally assembled according to the Assembler definition.</li></ul><p>The parameters of the compile phase are similar to those of the javascript compile goal. An additional parameters specific to titanium goals is required:</p><dl><dt>platform</dt><dd>The name of the platform to compile. The value of this parameter is used to determine the platform specific folder to use when copying javascript files.</dd></dl><p>At the end of this phase, if you used the default <tt>target/titanium</tt> output directory, and you have compile twice, once for Android and once for iPhone, you'll have the following build structure:</p><div class="source"><pre>|- target
  `- titanium
    |- android
    | |- tiapp.xml     (processed tiapp.xml merged with properties from your pom)
    | `- Resources
    |   |- android
    |   | `- any android resources
    |   |- iphone      (useless)
    |   `- any common resources
    |- android-scripts
    | |- app.js        (customized for android)
    | `- any other js for android not assembled into app.js
    |- iphone
    | |- tiapp.xml     (processed tiapp.xml merged with properties from your pom)
    | `- Resources
    |   |- android     (useless)
    |   |- iphone
    |   | `- any iphone resources
    |   `- any common resources
    `- iphone-scripts
      |- app.js        (customized for iphone)
      `- any other js for iphone not assembled into app.js</pre></div></div><div class="section"><h3>Prepare package phase<a name="Prepare_package_phase"></a></h3><p>During this phase, the <tt>*-scripts</tt> folders are copied to the <tt>Ressources</tt> folder. If the <tt>executeMode</tt> is <tt>none</tt>, the copy could also strip out debug code and compress it. See the <tt>compress</tt> goal of Javascript development for more information.</p></div><div class="section"><h3>The package phase<a name="The_package_phase"></a></h3><p>During the package phase the Titanium Appcelerator&#x2122; builders (written in Python) are executed to build an application from <tt>scriptsDirectory</tt> folder for the specified platform.</p><p>In order to be able to perform the packaging, the plugin needs to find the proper builder for the target platform on the local filesystem. It use two techniques to found the correct builder:</p><ul><li>By looking at the SDK version and using the standard location for the current OS;</li><li>By specifying the builders to use manually.</li></ul><p>To use the first technique, put the following in the plugin configuration:</p><div class="source"><pre>&lt;titaniumVersion&gt;1.7.2&lt;/titaniumVersion&gt;</pre></div><p>To use the second manual technique, use the following:</p><div class="source"><pre>&lt;titaniumSettings&gt;
  &lt;androidBuilder&gt;path/to/android/builder.py&lt;/androidBuilder&gt;
  &lt;iosBuilder&gt;path/to/iphone/builder.py&lt;/iosBuilder&gt;
&lt;/titaniumSettings&gt;</pre></div><p>When compiling for the Android platform, the Android SDK location is retrieved based on an environment variable named ANDROID_HOME. You may also specify the location of the Android SDK in the plugin configuration or by setting the <tt>$<a name="androidSdk">androidSdk</a></tt> property. You may also specify the Android API version, which default to the highest available.</p><div class="source"><pre>&lt;androidSDK&gt;/path/to/the/android/sdk&lt;/androidSDK&gt;
&lt;androidAPI&gt;11&lt;/androidAPI&gt;</pre></div><p>When packaging, you can also specify the executeMode. This property allow to specify whether the packaged version should be executed on a device or on an emulator. By default, the packaging phase doesn't execute the builded application.</p><p>When packaging for Android, you also need to configure some <tt>virtualDevice</tt> parameters. This property allows you to specify the AVD on which the project should be launched.</p><div class="source"><pre>&lt;virtualDevice&gt;
    &lt;androidAPI&gt;7&lt;/androidAPI&gt;   &lt;!-- defaults to the androidAPI set for compiling --&gt;
    &lt;skin&gt;HVGA&lt;/skin&gt;   &lt;!-- The skin of the AVD. If not specified HVGA will be used --&gt;
    &lt;wait&gt;60000&lt;/wait&gt;  &lt;!-- Time to wait for the emulator to startup --&gt;
&lt;/virtualDevice&gt;</pre></div><p>When packaging for release, the code need to be properly signed using your personnal signing key. You may specify to store and the name for the key used in <tt>titaniumSettings</tt></p><div class="source"><pre>&lt;titaniumSettings&gt;
  &lt;!-- The keystore containing the key to use when signing the application --&gt;
  &lt;keystore&gt;/path/to/the/keystore&lt;/keystore&gt;
  &lt;password&gt;keystorePassword&lt;/password&gt;
  &lt;alias&gt;keyname&lt;/alias&gt;
&lt;/titaniumSettings&gt;</pre></div><p>When compiling for iOS, you also need to specify the <tt>iosVersion</tt> (default to the latest) and a provisioning profile if you want to run on a physical device.</p><div class="source"><pre>&lt;iosVersion&gt;4.3&lt;/iosVersion&gt;
&lt;titaniumSettings&gt;
  &lt;iosDevelopmentProvisioningProfile&gt;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxxx&lt;/iosDevelopmentProvisioningProfile&gt;
  &lt;iosDistributionProvisioningProfile&gt;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxxx&lt;/iosDistributionProvisioningProfile&gt;
&lt;/titaniumSettings&gt;</pre></div><p>For running in a simulator you may when to also specify the characteristics of the simulator in the <tt>virtualDevice</tt> parameter.</p><div class="source"><pre>&lt;virtualDevice&gt;
  &lt;iosVersion&gt;4.3&lt;/iosVersion&gt; &lt;!-- default to the iosVersion set for compiling --&gt;
  &lt;family&gt;ipad&lt;/family&gt; &lt;!-- default to the plateform, with universal being iphone --&gt;
&lt;/virtualDevice&gt;</pre></div></div><div class="section"><h3>Tests<a name="Tests"></a></h3><p>Tests are based on Jasmine. The test phase is composed of 2 goals:</p><dl><dt>javascript:prepare-titanium-jasmine-tests</dt><dd>Take the source and the tests scripts and prepare them inside the <tt>jasmineTargetDir</tt> with a Titanium Appcelerator&#x2122; jasmine test application.</dd><dt>javascript:titanium-jasmine</dt><dd>Build the Titanium Appcelerator&#x2122; test application and install or run it on the specified platform.</dd></dl><div class="section"><h4>Preparing tests<a name="Preparing_tests"></a></h4><p>The directory containing the Titanium Appcelerator&#x2122; JavaScript files may be specified by setting the <tt>sourceDirectory</tt> property.</p><p>The Jasmine specs files are located under <tt>jasmineTestSourceDirectory</tt>. Just like the compile phase, it's possible to have platform specific tests by putting them in an appropriate platform folder.</p><p>By default <tt>prepare-titanium-jasmine-tests</tt> will extract it's own Titanium Appcelerator&#x2122; test application. However, you can specify your own Titanium Appcelerator&#x2122; test application by setting the <tt>jasmineTitaniumAppSourceDirectory</tt> property. You can explicitely exclude some specs files using the <tt>specExcludes</tt> parameter.</p><div><pre>|- src
  `- test
    `- javascript
      |- android
      `- iphone</pre></div><p>Resulting structure:</p><div><pre>|- target
  `- titanium-jasmine
    |- android
    | `- Resources
    `- iphone
      `- Resources</pre></div></div><div class="section"><h4>Running tests<a name="Running_tests"></a></h4><p>As the phase package use the <tt>executeMode</tt> parameter to determine how the application should be executed, the test phase use the <tt>testExecuteMode</tt> parameter. If <tt>testExecuteMode</tt> is not specified, the value of <tt>executeMode</tt> will be used.</p><p>Note that if <tt>testExecuteMode</tt> is not specified and <tt>executeMode</tt> is 'None', <tt>testExecuteMode</tt> will be 'None' and tests will be skipped.</p></div></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2011
                        <a href="http://softec.lu/">SOFTEC sa</a>.
            All Rights Reserved.      
                
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
